"use strict";var Page={};Page.Init=function(){var e=new Phaser.Game(800,600,Phaser.AUTO,"page",null,!0,!1),t=function(e){};t.Boot=function(e){};var a,i,n,o,s=1,r,c;t.Boot.prototype={preload:function(){e.load.spritesheet("tile","assets/tiles/tile.png",128,74,1),e.time.advancedTiming=!0,e.plugins.add(new Phaser.Plugin.Isometric(e)),e.iso.anchor.setTo(.5,.1),e.world.setBounds(0,0,1024,600),e.physics.startSystem(Phaser.Physics.P2JS)},create:function(){e.canvas.oncontextmenu=function(e){e.preventDefault()},c=new Phaser.Point(0,0),r=new Phaser.Rectangle(0,0,e.width,e.height),e.camera.x=e.width*-.5,e.camera.y=e.height*-.5,a=e.add.group(),this.spawnTiles(),i=new Phaser.Plugin.Isometric.Point3,o=e.input.keyboard.createCursorKeys()},update:function(){function t(t){-1==e.input.mouse.wheelDelta?s+=.03:1==e.input.mouse.wheelDelta&&(s-=.03)}o.down.isDown||e.input.keyboard.isDown(Phaser.Keyboard.S)?e.camera.y+=10:(o.up.isDown||e.input.keyboard.isDown(Phaser.Keyboard.W))&&(e.camera.y-=10),o.left.isDown||e.input.keyboard.isDown(Phaser.Keyboard.A)?e.camera.x-=10:(o.right.isDown||e.input.keyboard.isDown(Phaser.Keyboard.D))&&(e.camera.x+=10),e.input.mouse.mouseWheelCallback=t,s=Phaser.Math.clamp(s,1,2),e.world.scale.set(s),this.game.iso.unproject({x:(this.game.input.activePointer.position.x+this.game.camera.x)/this.game.camera.scale.x,y:(this.game.input.activePointer.position.y+this.game.camera.y)/this.game.camera.scale.y},i);var n;this.game.input.activePointer.isDown?(this.game.origDragPoint&&(this.game.camera.x+=this.game.origDragPoint.x-this.game.input.activePointer.position.x,this.game.camera.y+=this.game.origDragPoint.y-this.game.input.activePointer.position.y),this.game.origDragPoint=this.game.input.activePointer.position.clone()):this.game.origDragPoint=null,a.forEach(function(t){var a=t.isoBounds.containsXY(i.x,i.y);!t.selected&&a?(t.selected=!0,t.tint=8830938,e.input.onDown.add(function(){var a;a=10!==t.isoZ?10:0,e.add.tween(t).to({isoZ:a},100,Phaser.Easing.Quadratic.InOut,!0)},this)):t.selected&&!a&&(t.selected=!1,t.tint=16777215,e.input.onDown.add(function(){e.add.tween(t).to({isoZ:0},100,Phaser.Easing.Quadratic.InOut,!0)},this))})},render:function(){e.debug.text("fps: "+e.time.fps||"--",2,14,"#999"),e.debug.text("camera x: "+e.camera.x||"--",2,36,"#999"),e.debug.text("camera y: "+e.camera.y||"--",2,58,"#999")},spawnTiles:function(){for(var t,i=70,n=0;480>n;n+=i)for(var o=0;480>o;o+=i)t=e.add.isoSprite(n,o,0,"tile",0,a),t.anchor.setTo(.5,0)}},e.state.add("Boot",t.Boot),e.state.start("Boot")},Page.Init();